// Add these models to your existing schema.prisma file

model Walkaround {
  id          String          @id @default(cuid())
  projectId   String
  userId      String
  startTime   DateTime
  endTime     DateTime?
  audioUrl    String?
  transcript  String?          @db.Text
  summary     String?          @db.Text
  reportUrl   String?
  status      WalkaroundStatus @default(IN_PROGRESS)
  metadata    Json?
  createdAt   DateTime        @default(now())
  updatedAt   DateTime        @updatedAt
  
  project     Card            @relation(fields: [projectId], references: [id], onDelete: Cascade)
  user        User            @relation(fields: [userId], references: [id])
  photos      WalkaroundPhoto[]
  
  @@index([projectId])
  @@index([userId])
}

model WalkaroundPhoto {
  id           String      @id @default(cuid())
  walkaroundId String
  url          String
  thumbnailUrl String?
  timestamp    DateTime
  location     Json?       // {lat, lng, accuracy}
  caption      String?
  order        Int         @default(0)
  createdAt    DateTime    @default(now())
  
  walkaround   Walkaround  @relation(fields: [walkaroundId], references: [id], onDelete: Cascade)
  
  @@index([walkaroundId])
}

enum WalkaroundStatus {
  IN_PROGRESS
  UPLOADING
  PROCESSING
  COMPLETED
  FAILED
}

// Also update the Card model to include walkarounds relation:
// walkarounds  Walkaround[]

// And update the User model to include walkarounds relation:
// walkarounds  Walkaround[]